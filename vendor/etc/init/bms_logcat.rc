on boot
    mkdir /data/vendor/log/bms_log
    chown root system /data/vendor/log/bms_log
    chmod 0775 /data/vendor/log/bms_log
    chmod 0666 /sys/class/hw_power/power_log/dev_id
    chown system system /sys/class/hw_power/power_log/dev_id
    chmod 0444 /sys/class/hw_power/power_log/head
    chown system system /sys/class/hw_power/power_log/head
    chmod 0444 /sys/class/hw_power/power_log/content
    chown system system /sys/class/hw_power/power_log/content
    chown system system /sys/class/hw_power/adsp_log/dump_log
    chown system system /sys/class/hw_power/adsp_log/on
    chown system system  /sys/class/hw_power/adsp_log/adsplog
    chown system system /sys/class/hw_power/adsp_log/startup_time
    chown system system /sys/class/hw_power/adsp_log/nochg_interval
    chown system system /sys/class/hw_power/adsp_log/mmi_flag
    start bms_logcat

on charger
    mkdir /splash2/bms_log
    chown root system /splash2/bms_log
    chmod 0775 /splash2/bms_log
    chmod 0666 /sys/class/hw_power/power_log/dev_id
    chown system system /sys/class/hw_power/power_log/dev_id
    chmod 0444 /sys/class/hw_power/power_log/head
    chown system system /sys/class/hw_power/power_log/head
    chmod 0444 /sys/class/hw_power/power_log/content
    chown system system /sys/class/hw_power/power_log/content
    chown system system /sys/class/hw_power/adsp_log/on
    start bms_logcat

service bms_logcat /vendor/bin/bms_logcat
    user system
    group system
    oneshot

on shutdown
    write /sys/class/hw_power/adsp_log/dump_log "1"

on property:persist.sys.msc.debug.on=*
    restart bms_logcat

on property:bms.logcat.enabled=1 && property:persist.sys.msc.debug.on=0
    restart bms_logcat

on property:bms.logcat.enabled=0 && property:persist.sys.msc.debug.on=0
    write /sys/class/hw_power/adsp_log/dump_log "1"
    write /sys/class/hw_power/adsp_log/on "0"
    stop bms_logcat
